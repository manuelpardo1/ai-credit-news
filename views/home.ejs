<%- include('partials/header', { page: 'home' }) %>

<section class="hero">
  <div class="container">
    <h1>AI in Credit & Banking</h1>
    <p>Curated news on artificial intelligence applications in credit scoring, lending, fraud detection, and financial services.</p>
  </div>
</section>

<main class="container">
  <div class="home-layout">
    <div class="main-content">
      <!-- Weekly Editorial -->
      <% if (editorial) { %>
        <section class="editorial-featured">
          <div class="editorial-label">Weekly Editorial</div>
          <h2><%= editorial.title %></h2>
          <div class="editorial-excerpt">
            <%= editorial.content.substring(0, 400) %>...
          </div>
          <a href="/editorial/<%= editorial.id %>" class="editorial-link">Read Full Editorial &rarr;</a>
        </section>
      <% } %>

      <!-- Latest Articles -->
      <section class="section">
        <div class="section-header">
          <h2>Latest Articles</h2>
        </div>

        <% if (articles && articles.length > 0) { %>
          <div class="articles-grid">
            <% articles.forEach(article => { %>
              <%- include('partials/article-card', { article }) %>
            <% }) %>
          </div>
        <% } else { %>
          <div class="empty-state">
            <div class="empty-state-icon">ðŸ“­</div>
            <h3>No articles yet</h3>
            <p>Check back soon for the latest AI in credit & banking news.</p>
          </div>
        <% } %>
      </section>
    </div>

    <aside class="sidebar">
      <!-- Subscribe Widget -->
      <%- include('partials/subscribe-sidebar') %>

      <!-- Categories -->
      <div class="sidebar-section">
        <h3>Categories</h3>
        <% const icons = {
          'ai-credit-scoring': 'ðŸ’³',
          'banking-automation': 'ðŸ¤–',
          'fraud-detection': 'ðŸ›¡ï¸',
          'regulatory-compliance': 'âš–ï¸',
          'risk-management': 'ðŸ“Š',
          'customer-experience': 'ðŸ‘¥',
          'research-innovation': 'ðŸ’¡',
          'case-studies': 'ðŸ“š',
          'industry-news': 'ðŸ“°',
          'ethics-bias': 'âš¡'
        }; %>
        <ul class="sidebar-categories">
          <% categories.slice(0, 6).forEach(category => { %>
            <li>
              <a href="/category/<%= category.slug %>">
                <span><%= icons[category.slug] || 'ðŸ“' %> <%= category.name %></span>
                <span class="count"><%= category.article_count %></span>
              </a>
            </li>
          <% }) %>
        </ul>
        <a href="/categories" class="view-all-link">View all categories &rarr;</a>
      </div>
    </aside>
  </div>

  <!-- All Categories Grid -->
  <section class="section categories-section">
    <div class="section-header">
      <h2>Browse by Category</h2>
      <a href="/categories">View all &rarr;</a>
    </div>

    <div class="categories-grid">
      <% categories.forEach(category => { %>
        <a href="/category/<%= category.slug %>" class="category-card">
          <div class="category-card-icon"><%= icons[category.slug] || 'ðŸ“' %></div>
          <h4><%= category.name %></h4>
          <span class="category-card-count"><%= category.article_count %> article<%= category.article_count !== 1 ? 's' : '' %></span>
        </a>
      <% }) %>
    </div>
  </section>
</main>

<%- include('partials/footer') %>
