<%- include('partials/header', { title: 'Weekly Editorials', page: 'editorials', categories: categories }) %>

<main class="container">
  <div class="editorials-page">
    <header class="page-header">
      <h1>Weekly Editorials</h1>
      <p class="page-description">AI-generated insights and analysis on the week's most important developments in AI and credit.</p>
    </header>

    <% if (editorials && editorials.length > 0) { %>
      <div class="editorials-list">
        <% editorials.forEach((editorial, index) => { %>
          <article class="editorial-card <%= index === 0 ? 'featured' : '' %>">
            <div class="editorial-card-content">
              <div class="editorial-card-meta">
                <span class="editorial-label">Weekly Editorial</span>
                <span class="editorial-date">
                  Week of <%= new Date(editorial.week_start).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }) %>
                </span>
              </div>
              <h2><a href="/editorial/<%= editorial.id %>"><%= editorial.title %></a></h2>
              <p class="editorial-excerpt">
                <%= editorial.content.substring(0, 250).replace(/\n/g, ' ') %>...
              </p>
              <a href="/editorial/<%= editorial.id %>" class="read-more">Read Editorial &rarr;</a>
            </div>
          </article>
        <% }) %>
      </div>
    <% } else { %>
      <div class="empty-state">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M12 20h9"></path>
          <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
        </svg>
        <h2>No editorials yet</h2>
        <p>Our first weekly editorial is coming soon. Subscribe to get notified!</p>
        <form action="/subscribe" method="POST" class="inline-subscribe">
          <input type="email" name="email" placeholder="your@email.com" required>
          <button type="submit">Subscribe</button>
        </form>
      </div>
    <% } %>
  </div>
</main>

<%- include('partials/footer') %>
