<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= typeof title !== 'undefined' ? title + ' | ' : '' %>AI Credit News</title>
  <meta name="description" content="AI-powered insights for credit & financial services. Curated news on AI in credit scoring, lending, fraud detection, and banking.">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#000000">

  <!-- Open Graph / Social -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="<%= typeof title !== 'undefined' ? title + ' | ' : '' %>AI Credit News">
  <meta property="og:description" content="AI-powered insights for credit & financial services">
  <meta property="og:image" content="/images/og-image.png">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
  <script src="/js/i18n.js"></script>
</head>
<body>
  <!-- Mobile Sidebar Overlay -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <!-- Mobile Slide-out Sidebar -->
  <aside class="mobile-sidebar" id="mobileSidebar">
    <div class="mobile-sidebar-header">
      <a href="/" class="mobile-sidebar-logo">AI Credit News</a>
      <button class="mobile-sidebar-close" id="closeSidebar" aria-label="Close menu">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M18 6L6 18M6 6l12 12"></path>
        </svg>
      </button>
    </div>

    <nav class="mobile-sidebar-nav">
      <a href="/" class="<%= typeof page !== 'undefined' && page === 'home' ? 'active' : '' %>">Home</a>
      <a href="/all" class="<%= typeof activeCategory !== 'undefined' && activeCategory === 'all' && page !== 'home' ? 'active' : '' %>">All Articles</a>
      <% if (typeof categories !== 'undefined' && categories.length > 0) { %>
        <% categories.forEach(category => { %>
          <a href="/category/<%= category.slug %>" class="<%= typeof activeCategory !== 'undefined' && activeCategory === category.slug ? 'active' : '' %>"><%= category.name %></a>
        <% }) %>
      <% } %>
    </nav>

    <div class="mobile-sidebar-divider"></div>

    <nav class="mobile-sidebar-secondary">
      <a href="/editorial">Editorial</a>
      <a href="/about">About</a>
      <a href="/analytics">Analytics</a>
    </nav>

    <div class="mobile-sidebar-divider"></div>

    <div class="mobile-sidebar-auth">
      <% if (typeof user !== 'undefined' && user) { %>
        <a href="/auth/profile" class="mobile-sidebar-user">
          <span class="user-avatar"><%= user.name ? user.name.charAt(0).toUpperCase() : 'U' %></span>
          <span><%= user.name || user.email %></span>
        </a>
        <a href="/auth/logout" class="mobile-sidebar-logout">Sign Out</a>
      <% } else { %>
        <a href="/auth/login" class="btn-sidebar-login">Sign In</a>
      <% } %>
    </div>

    <div class="mobile-sidebar-footer">
      <button class="lang-toggle-sidebar" onclick="toggleLanguage()">
        <span class="lang-flag" id="langFlagSidebar">ðŸ‡ºðŸ‡¸</span>
        <span class="lang-code">EN</span>
      </button>
    </div>
  </aside>

  <header class="header">
    <div class="container header-inner">
      <!-- Mobile menu button -->
      <button class="mobile-menu-btn" id="openSidebar" aria-label="Open menu">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 12h18M3 6h18M3 18h18"></path>
        </svg>
      </button>

      <a href="/" class="logo">AI Credit News</a>

      <nav class="nav">
        <a href="/editorial" class="<%= typeof page !== 'undefined' && (page === 'editorial' || page === 'editorials') ? 'active' : '' %>">Editorial</a>
        <a href="/about" class="<%= typeof page !== 'undefined' && page === 'about' ? 'active' : '' %>" data-i18n="about">About</a>
        <a href="/analytics">Analytics</a>
        <% if (typeof user !== 'undefined' && user) { %>
          <a href="/auth/profile" class="user-link"><%= user.name || 'Account' %></a>
        <% } else { %>
          <a href="/auth/login" class="btn-login">Sign In</a>
        <% } %>
        <button class="lang-toggle" onclick="toggleLanguage()" title="Switch language">
          <span class="lang-flag" id="langFlag">ðŸ‡ºðŸ‡¸</span>
          <span class="lang-code" id="langCode">EN</span>
        </button>
      </nav>
    </div>
  </header>

  <!-- Category Navigation (Desktop) -->
  <nav class="category-nav">
    <a href="/" class="<%= typeof page !== 'undefined' && page === 'home' ? 'active' : '' %>" data-i18n="home">Home</a>
    <a href="/all" class="<%= typeof activeCategory !== 'undefined' && activeCategory === 'all' && page !== 'home' ? 'active' : '' %>" data-i18n="all">All</a>
    <% if (typeof categories !== 'undefined' && categories.length > 0) { %>
      <% categories.slice(0, 6).forEach(category => { %>
        <a href="/category/<%= category.slug %>" class="<%= typeof activeCategory !== 'undefined' && activeCategory === category.slug ? 'active' : '' %>" data-category="<%= category.slug %>"><%= category.name %></a>
      <% }) %>
    <% } %>
  </nav>

<script>
// Mobile sidebar toggle
const sidebar = document.getElementById('mobileSidebar');
const overlay = document.getElementById('sidebarOverlay');
const openBtn = document.getElementById('openSidebar');
const closeBtn = document.getElementById('closeSidebar');

function openSidebar() {
  sidebar.classList.add('open');
  overlay.classList.add('open');
  document.body.style.overflow = 'hidden';
}

function closeSidebar() {
  sidebar.classList.remove('open');
  overlay.classList.remove('open');
  document.body.style.overflow = '';
}

openBtn.addEventListener('click', openSidebar);
closeBtn.addEventListener('click', closeSidebar);
overlay.addEventListener('click', closeSidebar);

// Close on escape key
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') closeSidebar();
});
</script>
